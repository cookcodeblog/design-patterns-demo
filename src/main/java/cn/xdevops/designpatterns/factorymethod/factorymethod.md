[TOC]

# FactoryMethod 工厂方法模式



## 定义

- 工厂方法模式定义了一个创建对象的接口，但由子类决定要实例化的类是哪一个。工厂方法让类把实例化推迟到子类。

  

## 结构

- 工厂方法模式包括
  - 创建者（creator）类
    - 抽象创建者父类
    - 具体生产产品的创建者子类
  - 产品（product）类
    - 抽象产品父类
    - 实际生产的产品子类





## 用法

- 静态工厂方法模式：将创建产品的逻辑抽取到一个独立的创建者类中，把创建方法定义成静态的，参见StaicPizzaFactory.java。该模式的优点是简单，缺点是不能通过继承来改变创建方法的行为。
- 简单工厂模式：将创建产品的逻辑抽取到一个独立的创建者类中，把创建方法定义成类成员方法。将其他创建类似产品的逻辑抽取到各自的创建者子类中，这些子类可以有个性化的创建逻辑。参见SimplePizzaFactory及其子类。
- 工厂方法模式：将创建产品的逻辑抽取到一个独立的创建者类中，允许子类overide创建逻辑中的一部分。参见AbstractPizzaStore类及其子类。抽象工厂模式和工厂方法模式很类似，但是更有扩展性。



## 反例

- 把所有逻辑都放在一个类，或一个方法中，很长的代码，很多的if-else，很多层嵌套。